@model IEnumerable<HediyelikEsya.Models.Urun>

@{
    ViewData["Title"] = "ÃœrÃ¼n Galerisi";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-primary fw-bold" style="font-family: 'Brush Script MT', cursive;">ğŸ Hediye Kutusu Galerisi</h2>
        
        @* SADECE ADMÄ°N GÃ–REBÄ°LÄ°R *@
        @if (User.Identity.IsAuthenticated)
        {
            <a asp-action="Create" class="btn btn-success rounded-pill px-4 shadow-sm">
                <i class="bi bi-plus-lg"></i> Yeni Kutu Ekle
            </a>
        }
    </div>

    @if (!Model.Any())
    {
        <div class="alert alert-warning text-center shadow-sm">
            <h4>HenÃ¼z hiÃ§ Ã¼rÃ¼n eklenmemiÅŸ.</h4>
            <p>Admin panelinden giriÅŸ yaparak Ã¼rÃ¼n ekleyebilirsiniz.</p>
        </div>
    }
    else
    {
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
            @foreach (var item in Model)
            {
                <div class="col">
                    <div class="card h-100 shadow-sm border-0 hover-shadow transition-all">
                        
                        @* RESÄ°M ALANI GÃœNCELLENDÄ°: Height 300px yapÄ±ldÄ± ve object-fit: contain eklendi *@
                        <div style="height: 300px; overflow: hidden;" class="bg-white rounded-top position-relative border-bottom">
                             <img src="~/img/@(string.IsNullOrEmpty(item.ResimUrl) ? "logo.jpg.jpeg" : item.ResimUrl)" 
                                 class="card-img-top h-100 w-100" 
                                 style="object-fit: contain; transition: transform 0.3s ease;"
                                 onmouseover="this.style.transform='scale(1.05)'"
                                 onmouseout="this.style.transform='scale(1)'"
                                 alt="@item.Ad">
                             <span class="position-absolute top-0 end-0 bg-danger text-white px-2 py-1 m-2 rounded-pill fw-bold shadow-sm">
                                 @item.Fiyat â‚º
                             </span>
                        </div>
                        
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title fw-bold text-dark">@item.Ad</h5>
                            <p class="card-text text-muted flex-grow-1">
                                @(item.Aciklama != null && item.Aciklama.Length > 60 ? item.Aciklama.Substring(0, 60) + "..." : item.Aciklama)
                            </p>
                        </div>
                        
                        <div class="card-footer bg-transparent border-0 pb-3 px-3">
                            <div class="d-grid gap-2">
                                <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-outline-primary fw-bold">
                                    ğŸ” Kutuyu Ä°ncele
                                </a>

                                @* SADECE ADMÄ°N GÃ–REBÄ°LÄ°R *@
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <div class="d-flex justify-content-between mt-2">
                                        <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-warning flex-grow-1 me-1 text-dark fw-bold">DÃ¼zenle</a>
                                        <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-sm btn-danger flex-grow-1 ms-1 fw-bold">Sil</a>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>

<style>
    .hover-shadow:hover { box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important; }
    .transition-all { transition: all 0.3s ease; }
</style>